#!/bin/bash

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ñ–∞–π–ª—É .env.production
if [ ! -f .env.production ]; then
    echo "–ü–æ–º–∏–ª–∫–∞: –§–∞–π–ª .env.production –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!"
    echo "–ë—É–¥—å –ª–∞—Å–∫–∞, —Å—Ç–≤–æ—Ä—ñ—Ç—å –π–æ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤—ñ .env.production.example"
    exit 1
fi

echo "üöÄ –ü–æ—á–∏–Ω–∞—î–º–æ –¥–µ–ø–ª–æ–π..."

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, —è–∫—â–æ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞ VPS)
# git pull origin main

echo "üèóÔ∏è  –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤..."
docker compose up -d --build

echo "üßπ –û—á–∏—â–µ–Ω–Ω—è –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö –æ–±—Ä–∞–∑—ñ–≤..."
docker image prune -f

echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!"
